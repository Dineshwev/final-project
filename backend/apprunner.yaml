version: 1.0
runtime: nodejs22
build:
  commands:
    build:
      - echo "Installing dependencies"
      - npm install
      - echo "Checking package.json scripts"
      - npm run
      - echo "Listing files in current directory"
      - ls -la
      - echo "Checking if server-apprunner.js exists"
      - ls -la server-apprunner.js
      - echo "Current working directory:"
      - pwd
  env:
    - name: NODE_ENV
      value: production
run:
  runtime-version: 22
  command: cd backend && node server-apprunner.js
  network:
    port: 3002
  env:
    - name: PORT
      value: 3002
    - name: NODE_ENV
      value: production